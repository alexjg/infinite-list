!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.InfiniteList=t():e.InfiniteList=t()}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){e.exports=n(1)},function(e,t,n){var r=n(2),o=n(3),i=n(5),m=n(6),f=n(7),s=n(4),l=1e3,a=function(e){function t(e,t){return R=e,d(e),O=new f(e,H,E,p),E.useNativeScroller?w=new o(b,function(e){S=e||0,L=!0}):(T=new i(b),w=new r(R,function(e){S=e||0,L=!0},t),w.setDimensions(Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER)),a(),g(),this}function n(){m.stopAnimationLoop(),R.removeChild(b)}function a(){m.startAnimationLoop(function(){if(L)c();else{var e=Date.now();e-F>l&&(y=R.clientHeight,F=e,y!=R.clientHeight||x!=R.clientWidth?(S=b.scrollTop,g()):E.useNativeScroller&&S!=b.scrollTop&&(S=b.scrollTop,c()))}})}function u(e){for(var t=e||0;t<E.itemsCount;++t)M[t]=E.itemHeightGetter&&E.itemHeightGetter(t)||M[t]||200;E.hasMore&&(M[E.itemsCount]=200)}function d(e){H=document.createElement("div"),s.applyElementStyle(H,{position:E.useNativeScroller?"relative":"absolute",width:"100%"}),b=document.createElement("div"),s.applyElementStyle(b,{position:"relative",height:"100%",width:"100%",overflowY:E.useNativeScroller?"scroll":"hidden","-webkit-overflow-scrolling":"touch"}),b.appendChild(H),e.appendChild(b)}function g(e){var t=O.getRenderedItems()[0],n=t&&t.getItemIndex()||0,r=t&&t.getItemOffset()||0,o=S-r;e&&(e.itemsCount&&(E.itemsCount>e.itemsCount&&(n=0,b.scrollTop=0,o=0),E.itemsCount=e.itemsCount,M=M.slice(0,e.itemsCount)),null!=e.hasMore&&(E.hasMore=e.hasMore)),y=R.clientHeight,x=R.clientWidth,O.refresh(),u(),T&&T.refresh(),e&&!E.useNativeScroller&&I(n,!1,o),L=!0}function h(e){var t=E.itemsCount-1+(E.hasMore?1:0),n=O.getRenderedItems(),r=n[n.length-1],o=Number.MIN_SAFE_INTEGER,i=Number.MAX_SAFE_INTEGER,m=E.pullToRefresh.height;if(n.length>0&&0==n[0].getItemIndex()&&(o=n[0].getItemOffset()),r&&r.getItemIndex()==t&&(i=r.getItemOffset()+r.getItemHeight()-y),o=N?o-m:o,E.useNativeScroller){var f=0;M.forEach(function(e){f+=e}),s.applyElementStyle(H,{height:f+"px"})}else w.setDimensions(o,i),e&&o>S&&w.scrollTo(o,!0)}function c(){var e;h(),E.useNativeScroller||s.applyTransformStyle(H,"matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,"+-S+", 0, 1)"),L=O.render(S,C,n,M),e=O.getRenderedItems(),C=null,n=null,e.forEach(function(e){M[e.getItemIndex()]=e.getItemHeight()});var t=e[0];if(t){for(var n=t.getItemOffset(),r=0,o=0;o<t.getItemIndex();++o)r+=M[o];if(n!=r){var i=n-r;b.scrollTop-=i,e.forEach(function(e){e.setItemOffset(e.getItemOffset()-i)})}}for(var m=0,f=0,o=0;o<M.length;++o)"number"==typeof M[o]&&(m+=M[o],f++);m/=f,T&&T.render(m*e[0].getItemIndex()+S-e[0].getItemOffset(),m*E.itemsCount)}function p(){E.pageFetcher(E.itemsCount,function(e,t){E.hasMore=t,E.itemsCount+=e,u(E.itemsCount-e),w.scrollTo(O.getRenderedItems()[O.getRenderedItems().length-1].getItemOffset()-y),E.useNativeScroller})}function I(e,t,n){var r=0;if(E.itemHeightGetter)for(var o=0;o<e;++o)r+=E.itemHeightGetter(o);else C=e;D=n||0,w.scrollTo(r,E.itemHeightGetter&&t)}function v(e){var t=O.getRenderedItems(),n=t.filter(function(t){return t.getItemIndex()==e})[0];if(n){var r=E.itemHeightGetter&&E.itemHeightGetter(e);r||(r=n.getDomElement().clientHeight,M[e]=r),n.setItemHeight(r);var o=n.getItemIndex()-t[0].getItemIndex(),i=t[o+1];if(n.getItemOffset()<S)for(;i&&n;)n.setItemOffset(i.getItemOffset()-n.getItemHeight()),i=n,n=t[--o];else for(;i&&n;)i.setItemOffset(n.getItemOffset()+n.getItemHeight()),n=i,i=t[++o+1]}}var y,x,E={itemHeightGetter:null,recalculateItemHeights:!1,itemRenderer:null,itemTypeGetter:null,pageFetcher:null,loadMoreRenderer:function(e,t){t.innerHTML='<div style="margin-left:14px;height:50px">Loading...</div>'},hasMore:!1,pullToRefresh:{height:null,idleRenderer:null,busyRenderer:null,beginRefreshAtOffset:null,onRefresh:null},itemsCount:0},R=null,b=null,H=null,T=null,O=null,w=null,M=[],S=0,C=0,D=0,L=!0,N=!1;for(var A in e)e.hasOwnProperty(A)&&(E[A]=e[A]);var G=e.initialPage;G&&(E.itemsCount=G.itemsCount||0,E.hasMore=G.hasMore||!1);var F=0;return{attach:t,detach:n,scrollToItem:I,refresh:g,refreshItemHeight:v}};e.exports=a},function(e,t){var n=525,r=function(e,t){function r(e){return e.targetTouches&&e.targetTouches.length>=1?e.targetTouches[0].clientY:e.clientY}function o(e){E=e,t(e)}function i(){var e,t,r;if(v)if(e=Date.now()-g,t=v*Math.exp(-e/n),r=R-t,r<h){if(R-t>=h-2)return void o(h);m(!0)}else if(r>c){if(R-t<=c+2)return void o(c);m(!1)}else t>2||t<-2?(o(R-t),requestAnimationFrame(i)):o(R)}function m(e){var t=e?h:c,r=e&&v>0||!e&&v<0;if(0!=v){var i=Date.now()-g,f=v*Math.exp(-i/(R==t?125:n));if(r&&Math.abs(f)<2)return void o(e?h:c);o(R-f),r?R!=t&&(R=t,v=R-E,g=new Date):(R=t-.1*(t-R),v=R-E),requestAnimationFrame(function(){m(e)})}}function f(e){y=!0,x=r(e),I=v=0,p=E,g=Date.now(),l(e),e.stopPropagation()}function s(e){var t,n,i=E<h||E>c?.5:1;y&&(l(e),t=r(e),n=x-t,(n>2||n<-2)&&(x=t,o(E+n*i))),e.preventDefault(),e.stopPropagation()}function l(e){var t=e.touches||[{pageX:e.pageX,pageY:e.pageY}],n=e.timeStamp,r=t[0].pageY;2===t.length&&(r=Math.abs(t[0].pageY+t[1].pageY)/2),b.push({offset:r,timestamp:n}),b.length>60&&b.splice(0,30)}function a(e){y=!1;for(var t=b.length-1,n=t-1,r=t-1;r>0&&b[r].timestamp>b[t].timestamp-100;r-=1)n=r;var o=b[t].timestamp-b[n].timestamp,m=b[t].offset-b[n].offset,f=-1e3*m/(1+o);I=.8*f+.2*I,v=1*I,R=Math.round(E+v),g=Date.now(),requestAnimationFrame(i),e.stopPropagation()}function u(e,t){var n=4e3;t?(e-E>n?E=e-n:E-e>n&&(E=e+n),v=e-E,R=e,g=Date.now(),requestAnimationFrame(i)):(v=0,o(e))}function d(e,t){h=e,c=t}var g=0,h=0,c=0,p=0,I=0,v=0,y=0,x=0,E=0,R=0,b=[];return e.addEventListener("touchstart",f),e.addEventListener("touchmove",s),e.addEventListener("touchend",a),e.addEventListener("mousedown",f),e.addEventListener("mousemove",s),e.addEventListener("mouseup",a),{setDimensions:d,scrollTo:u,isPressed:function(){return y}}};e.exports=r},function(e,t,n){var r=n(4),o=function(e,t){return e.addEventListener("scroll",function(){t(e.scrollTop)}),{setDimensions:function(t,n){r.applyElementStyle(e,{height:n-t+"px"})},scrollTo:function(){t(e.scrollTop)}}};e.exports=o},function(e,t){var n=function(e,t){Object.keys(t).forEach(function(n){e.style[n]!=t[n]&&(e.style[n]=t[n])})},r=function(e,t){var r={};["webkit","Moz","O","ms"].forEach(function(e){r[e+"Transform"]=t}),n(e,r)};e.exports={applyElementStyle:n,applyTransformStyle:r}},function(e,t,n){var r=n(4),o=function(e){function t(t,n){var m=(e.parentElement,Math.max(10,Math.floor(i/n*i))),f=Math.floor(t/(n-i)*(i-m)),s=m+"px";r.applyElementStyle(o,{height:s}),r.applyTransformStyle(o,"matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,"+f+", 0, 1)")}function n(){i=e.parentElement.clientHeight}var o=document.createElement("div"),i=e.parentElement.clientHeight;return r.applyElementStyle(o,{position:"absolute",top:"0px",right:"0px",marginRight:"3px",opacity:.3,width:"5px",backgroundColor:"#333"}),e.appendChild(o),{render:t,refresh:n}};e.exports=o},function(e,t){function n(e){var t=(new Date).getTime(),n=0;m=!0;var r=function(){var o=(new Date).getTime();n++,o-t>200&&(i=Math.min(60,1e3*n/(o-t)),t=o,n=0),e(),m&&requestAnimationFrame(r)};requestAnimationFrame(r)}function r(){m=!1}function o(){return i}var i=60,m=!1;e.exports={startAnimationLoop:n,stopAnimationLoop:r,getFPS:o}},function(e,t,n){var r=n(8),o=n(9),i=(n(4),n(6),30),m=1e3/i,f=function(e,t,n,i,f,s){function l(e,t,r,o){var i=(new Date).getTime();if("number"==typeof t&&t>=0){for(t=Math.max(0,Math.min(t,n.itemsCount-1));x.length>0;)E.addLayer(x.pop());var f=d(t);f.setItemOffset(e-(r||0)),x.push(f)}for(;x.length>1&&x[0]&&x[0].getItemOffset()+x[0].getItemHeight()<e;)E.addLayer(x.shift());if(1==x.length&&x[0].getItemOffset()<e){for(var s=x[0].getItemOffset()+x[0].getItemHeight(),h=x[0].getItemIndex();s<e;)++h,s+=listItemsHeights[h];if(x[0].getItemIndex()!=h)return l(s-listItemsHeights[h],h,0,listItemsHeights)}else if(x[0].getItemOffset()>e+v){for(var h=0,c=listItemsHeights[0];c<e;)h++,c+=listItemsHeights[h];return l(c-listItemsHeights[h],h,0,listItemsHeights)}for(var p=x[0];p&&p.getItemIndex()>0&&p.getItemOffset()>e;)if(p=a(p),x[x.length-1].getItemOffset()>e+v&&E.addLayer(x.pop()),(new Date).getTime()-i>m)return!0;if(0==p.getItemIndex()&&g(e,p.getItemOffset(),o),bottomRenderedItem.getItemIndex()<n.itemsCount&&"$LoadMore"==bottomRenderedItem.getIdentifier()){if(bottomRenderedItem=x[x.length-1],E.addLayer(x.pop()),x.length<=0)return l(e,bottomRenderedItem.getItemIndex(),void 0,minNumberOfItemsAhead);bottomRenderedItem=x[x.length-1]}for(;bottomRenderedItem&&bottomRenderedItem.getItemIndex()<n.itemsCount&&bottomRenderedItem.getItemOffset()+bottomRenderedItem.getItemHeight()<e+v;)if(bottomRenderedItem=u(bottomRenderedItem),x[0].getItemOffset()+x[0].getItemHeight()<e&&E.addLayer(x.shift()),(new Date).getTime()-i>m)return!0;for(var I=x[0],y=0;y<x.length;++y)if(x[y].getItemOffset()+x[y].getItemHeight()>=e+v){I=x[y];break}for(;bottomRenderedItem&&bottomRenderedItem.getItemIndex()>I.getItemIndex()+minNumberOfItemsAhead;)E.addLayer(x.pop()),bottomRenderedItem=x[x.length-1];for(;bottomRenderedItem&&bottomRenderedItem.getItemIndex()<n.itemsCount-1&&bottomRenderedItem.getItemIndex()<I.getItemIndex()+minNumberOfItemsAhead;)if(bottomRenderedItem=u(bottomRenderedItem),(new Date).getTime()-i>m)return!0;var R=x[0]&&x[0].getItemOffset();return x.forEach(function(e){e.getItemOffset()!=R&&e.setItemOffset(R),R+=e.getItemHeight()}),!1}function a(e){var t=d(e.getItemIndex()-1);return t&&(t.setItemOffset(e.getItemOffset()-t.getItemHeight()),x.unshift(t)),t}function u(e){var t=d(e.getItemIndex()+1);return t&&(t.setItemOffset(e.getItemOffset()+e.getItemHeight()),x.push(t)),t}function d(e){if(e==n.itemsCount)return n.hasMore?c():null;var t=n.itemTypeGetter?n.itemTypeGetter(e):"",r=h(e,t);return n.itemRenderer(e,r.getDomElement()),r}function g(e,t,r){if(n.pullToRefresh&&n.pullToRefresh.height){var o=n.pullToRefresh,i=o.height,m=o.idleRenderer,l=o.busyRenderer,a=o.beginRefreshAtOffset,u=o.onRefresh;if(e<t){if(!R){var d="$pullToRefresh$";R=h(-1,d,i),m(R.getDomElement())}var g=t-e;g>=(a||i)&&(r||H)||b?l(R.getDomElement()):m(R.getDomElement()),!b&&g>=(a||i)&&!r&&H&&(b=!0,f(i),u(function(){b=!1,s()})),H=r,R.setItemOffset(t-i)}}}function h(e,o){var i=o||(n.itemTypeGetter?n.itemTypeGetter(e):""),m=E.borrowLayerWithIdentifier(i);null==m&&(m=new r(t));var f=!n.recalculateItemHeights&&n.itemHeightGetter&&n.itemHeightGetter(e);return m.attach(e,n.useNativeScroller?0:13,f,i),m}function c(){if(0==x.length||"$LoadMore"!=x[x.length-1].getIdentifier()){var e=h(n.itemsCount,"$LoadMore");return n.loadMoreRenderer(n.itemsCount,e.getDomElement()),i(),e}return x[x.length-1]}function p(){v=e.clientHeight,y=e.clientWidth,x.forEach(function(e){n.itemRenderer(e.getItemIndex(),e.getDomElement()),e.setItemHeight(0)})}function I(){return x}var v=e.clientHeight,y=e.clientWidth,x=[],E=new o,R=null,b=!1,H=!1;return n.pullToRefresh&&g(),{render:l,refresh:p,getRenderedItems:I}};e.exports=f},function(e,t,n){var r=n(4),o=function(e){function t(e,t,n,o){return h=e,r.applyElementStyle(u,{right:t+"px",width:"100%",height:n+"px",overflow:"hidden"}),c=n,d=o,this}function n(){return h}function o(){return u}function i(){return d}function m(){return g}function f(e){r.applyTransformStyle(u,"matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,"+e+", 0, 1)"),g=e}function s(){return c||(c=o().clientHeight)}function l(e){c=e}function a(){var e=document.createElement("div");return r.applyElementStyle(e,{position:"absolute",top:0,left:0}),e}var u=null,d="",g=-1,h=-1,c=0;return u=a(),e.appendChild(u),{attach:t,getItemIndex:n,getDomElement:o,getItemOffset:m,setItemOffset:f,getItemHeight:s,setItemHeight:l,getIdentifier:i}};e.exports=o},function(e,t,n){var r=n(4),o=function(){function e(e,t){var o=e.getIdentifier();null==n[o]&&(n[o]=[]),n[o].push(e),e.setItemOffset(-1e4),r.applyElementStyle(e.getDomElement(),{display:"none"}),t&&r.applyElementStyle(e.getDomElement(),{display:"none"})}function t(e){if(null==n[e])return null;var t=n[e].pop();return null!=t&&r.applyElementStyle(t.getDomElement(),{display:"block"}),t}var n={};return{addLayer:e,borrowLayerWithIdentifier:t}};e.exports=o}])});